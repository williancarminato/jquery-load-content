;(function($,window,document,undefined){var pluginName="loadcontent",defaults={'elements':'div, p','contentType':'json','onSucess':function(element,response){element.html(response.content)},};function Plugin(element,options){this.element=element;this.options=$.extend({},defaults,options);this._defaults=defaults;this._name=pluginName;this.init()}Plugin.prototype={init:function(){(this.element.localName=='body')?this.applyToAll(this.options.elements,this.options):this.applyToElement(this.element,this.options)},applyToAll:function(elements,options){var plugin=this;var elements=options.elements.split(',');$(elements).each(function(key,value){var tag=new String(value).replace(/^\s+|\s+$/g,'')+"[data-ajax]";$(tag).each(function(){plugin.applyToElement($(this),options)})})},applyToElement:function(element,options){var $element=$(element);$.ajax({url:$element.data('ajax'),type:"GET",dataType:options.contentType,success:function(response){options.onSucess($element,response)},});$element.removeAttr('data-ajax')}};$.fn[pluginName]=function(options){return this.each(function(){if(!$.data(this,"plugin_"+pluginName)){$.data(this,"plugin_"+pluginName,new Plugin(this,options))}})}})(jQuery,window,document);
